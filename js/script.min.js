function ScriptLoader(){let e={};return{load:function(t,o){return e[t]?e[t]:(e[t]=new Promise(function(e){const t=document.createElement("script");t.type="text/javascript",t.src=o,t.onload=function(){setTimeout(function(){e(!0)},100)},document.getElementsByTagName("body")[0].appendChild(t)}),e[t])}}}function choiceInit(){const e=document.querySelector("#selectCustom");new Choices(e,{searchEnabled:!1,position:"bottom",itemSelectText:""})}function simpleBarInit(){new SimpleBar(document.querySelector(".custom-scroll-js"),{autoHide:!1})}function tooltipInit(){tippy("#tooltip-one",{content:"Пример современных тенденций - современная методология разработки",maxWidth:264,trigger:"mouseenter click focusin"}),tippy("#tooltip-two",{content:"Приятно, граждане, наблюдать, как сделанные на базе аналитики выводы вызывают у вас эмоции",maxWidth:264,trigger:"mouseenter click focusin"}),tippy("#tooltip-three",{content:"В стремлении повысить качество",maxWidth:232,trigger:"mouseenter click focusin"})}function catalogInit(){const e=PainterInfo();function t(e,t,o="target"){document.querySelectorAll(`.${e}`).forEach(function(t){t.classList.remove(`${e}--active`)}),document.querySelectorAll(`.${e}[data-${o}="${t}"]`).forEach(function(t){t.classList.add(`${e}--active`)})}$("#catalog__accordion").accordion({collapsible:!0,heightStyle:"content",active:0,activate:function(t,o){if(o.newPanel){const t=o.newPanel.find(".accordion__list--active .accordion__item-button").get(0);t?t.click():e.setPainter("default")}}}),document.querySelectorAll(".catalog__flag-button").forEach(function(o){o.addEventListener("click",function(o){const n=o.currentTarget.dataset.path;t("catalog__flag-button",n,"path"),t("catalog__description",n),t("accordion__list",n);const r=document.querySelector(".ui-accordion-content-active .accordion__list--active .accordion__item-button");r?r.click():e.setPainter("default")})});let o="";document.querySelectorAll(".accordion__item-button").forEach(function(n){n.addEventListener("click",function(n){const r=n.currentTarget.dataset.path;t("accordion__item-button",r,"path"),e.setPainter(r),o=r,window.innerWidth<1024&&document.querySelector(".catalog__painter-info").scrollIntoView()})})}function ymapsInit(){const e=document.body.offsetWidth;let t={center:[55.762161,37.6448],zoom:14.4};e<1650&&(t.center=[55.761826,37.616045],t.zoom=14),e<1023&&(t.center=[55.762761,37.611324],t.zoom=14),ymaps.ready(function(){const e=new ymaps.Map("map",{center:t.center,zoom:t.zoom}),o=new ymaps.Placemark([55.758468,37.601088],{},{iconLayout:"default#image",iconImageHref:"../image/contacts/map-marker.svg",iconImageSize:[20,20]});new ymaps.GeoObject({}),e.geoObjects.add(o)})}function formRequestAnswer(e){document.querySelector("body").classList.add("modal-no-scroll-body");const t=document.querySelector(".modal-window");t.classList.add("modal-window--active","form-content"),document.querySelector(".overlay").classList.add("overlay-active"),t.querySelector(".modal-content__text-name").innerHTML=e}function formInit(){let e=document.querySelector("input[type='tel']");new Inputmask("+7 (999) 999-99-99").mask(e),new JustValidate(".form-feedback",{rules:{name:{required:!0,function:function(e,t){return t.length>2}},tel:{required:!0,function:function(e,t){return t.match(/(\+7|8)\s?\(?[0-9]{3}\)?\s?[0-9]{3}-?[0-9]{2}-?[0-9]{2}/)}}},colorWrong:"#D11616",messages:{name:{required:"Введите имя",function:"Недопустимый формат"},tel:{required:"Введите номер телефона",function:"Недопустимый формат"}},submitHandler:function(e,t,o){e.classList.add("form-feedback__sending"),o({url:"https://spektra.wordcord.org/sendmail.php",method:"POST",data:t,async:!0,callback:function(t){let o="";JSON.parse(t).sent?(e.reset(),o="Email отправлен!"):o="Ошибка! Попробуйте отправить позже.",e.classList.remove("form-feedback__sending"),formRequestAnswer(o)}})}}),document.getElementById("form-feedback").addEventListener("submit",function(e){e.preventDefault()})}function PainterInfo(){let e=null;return{setPainter:async function(t){null===e&&await fetch("json/painters.json").then(function(e){return e.json()}).then(function(t){e=t});const o=e.find(function(e){return e.uid===t});if(o){const e=document.querySelector(".painter-content");e.querySelector(".catalog__painter-img").src=o.src,e.querySelector(".catalog__painter-img").alt=o.alt,e.querySelector(".catalog__painter-name").innerHTML=o.name;const t=e.querySelector(".catalog__link-to-gallery"),n=e.querySelector(".catalog__painter-date");o.date?(n.innerHTML=o.date,n.style.display="block",t.classList.add("catalog__link-to-gallery--hidden")):(n.style.display="none",t.classList.remove("catalog__link-to-gallery--hidden")),e.querySelector(".catalog__painter-description").innerHTML=o.desc}}}}document.addEventListener("DOMContentLoaded",function(){const e=ScriptLoader();new Swiper(".promo__swiper-container",{effect:"fade",crossfade:!0,autoplay:{delay:1e4,disableOnInteraction:!1},loop:!0}),document.querySelector("#header__burger").addEventListener("click",function(e){document.querySelector("#header__nav").classList.toggle("header__nav-list--active"),document.querySelector("#header__account").classList.toggle("header__account--active"),e.currentTarget.classList.toggle("header__burger--close"),e.currentTarget.blur()}),document.querySelector("#header__search-button").addEventListener("click",function(e){document.querySelector("#header__search-input").classList.add("header__search-input--active"),document.querySelector("#header__logo").classList.add("header__logo--disabled"),document.querySelector("#header__burger").classList.add("header__burger--disabled"),document.querySelector("#header").classList.add("header--mobile"),document.querySelector("#header__search-close-button").classList.add("header__search-close-button--active"),e.currentTarget.classList.add("header__search-button--active")}),document.querySelector("#header__search-close-button").addEventListener("click",function(e){document.querySelector("#header__search-input").classList.remove("header__search-input--active"),document.querySelector("#header__logo").classList.remove("header__logo--disabled"),document.querySelector("#header__burger").classList.remove("header__burger--disabled"),document.querySelector("#header").classList.remove("header--mobile"),document.querySelector("#header__search-button").classList.remove("header__search-button--active"),e.currentTarget.classList.remove("header__search-close-button--active")}),document.querySelector("#header__search-form").addEventListener("submit",function(e){const t=document.querySelector("#header__search-input").value;(!t||t.length<3)&&e.preventDefault()}),document.querySelectorAll(".header__dropdown-button").forEach(function(e){e.addEventListener("click",function(t){document.querySelectorAll(".header__dropdown-button").forEach(function(t){e!==t&&t.classList.remove("header__dropdown-button--active")}),t.currentTarget.classList.toggle("header__dropdown-button--active");const o=t.currentTarget.dataset.path;document.querySelectorAll(".header__dropdown-list-box").forEach(function(e){e.classList.remove("header__dropdown-list-box--show")}),t.currentTarget.classList.contains("header__dropdown-button--active")?document.querySelector(`.header__dropdown-list-box[data-target="${o}"]`).classList.add("header__dropdown-list-box--show"):document.querySelector(`.header__dropdown-list-box[data-target="${o}"]`).classList.remove("header__dropdown-list-box--show")})}),window.addEventListener("click",function(e){if(!e.target.matches(".header__dropdown-button")){const e=document.querySelectorAll(".header__dropdown-list-box");for(let t=0;t<e.length;t++){const o=e[t];o.classList.contains("header__dropdown-list-box--show")&&o.classList.remove("header__dropdown-list-box--show")}const t=document.querySelectorAll(".header__dropdown-button");for(let e=0;e<t.length;e++){const o=t[e];o.classList.contains("header__dropdown-button--active")&&o.classList.remove("header__dropdown-button--active")}}}),setTimeout(function(){e.load("simplebar","js/vendor/simplebar.min.js").then(simpleBarInit)},1e3),new Swiper(".gallery__swiper-container",{preloadImages:!1,slidesPerView:1,slidesPerGroup:1,slidesPerColumn:1,spaceBetween:0,breakpoints:{1650:{slidesPerView:3,slidesPerGroup:3,slidesPerColumn:2,spaceBetween:49},1450:{slidesPerView:3,slidesPerGroup:3,slidesPerColumn:2,spaceBetween:25},1250:{slidesPerView:2,slidesPerGroup:2,slidesPerColumn:2,spaceBetween:31},1024:{slidesPerView:2,slidesPerGroup:2,slidesPerColumn:2,spaceBetween:31},768:{slidesPerView:2,slidesPerGroup:2,slidesPerColumn:2,spaceBetween:26},320:{slidesPerView:1,slidesPerGroup:1,slidesPerColumn:1,spaceBetween:10}},lazy:{loadOnTransitionStart:!1,loadPrevNext:!0},navigation:{prevEl:".gallery__swiper-button-prev",nextEl:".gallery__swiper-button-next"},pagination:{el:".swiper-pagination-gallery.swiper-pagination",type:"fraction"},keyboard:{enable:!0,onlyInViewport:!0,pageUpDown:!1},watchSlidesProgress:!0,watchSlidesVisibility:!0,watchOverflow:!0,slidesPerColumnFill:"row",a11y:{nextSlideMessage:"Следующая страница слайда",prevSlideMessage:"Предыдущая страница слайда"}}),document.querySelectorAll(".gallery__slide").forEach(function(e){e.addEventListener("click",function(e){document.querySelector("body").classList.add("modal-no-scroll-body");const t=document.querySelector(".modal-window");t.classList.add("modal-window--active"),document.querySelector(".overlay").classList.add("overlay-active"),t.querySelector(".modal-content__slide").src=e.currentTarget.dataset.srcFull,t.querySelector(".modal-content__text-name").innerHTML=e.currentTarget.dataset.name,t.querySelector(".modal-content__text-title").innerHTML=e.currentTarget.dataset.title,t.querySelector(".modal-content__text-period").innerHTML=e.currentTarget.dataset.period,t.querySelector(".modal-content__text-desc").innerHTML=e.currentTarget.dataset.desc})}),document.querySelector(".modal-content__closed").addEventListener("click",function(){document.querySelector(".modal-window").classList.remove("modal-window--active","form-content"),document.querySelector(".overlay").classList.remove("overlay-active"),document.querySelector("body").classList.remove("modal-no-scroll-body")}),document.querySelector(".overlay").addEventListener("click",function(e){document.querySelector(".modal-window").classList.remove("modal-window--active","form-content"),e.currentTarget.classList.remove("overlay-active"),document.querySelector("body").classList.remove("modal-no-scroll-body")}),setTimeout(function(){e.load("choices","https://unpkg.com/choices.js@9.0.1/public/assets/scripts/choices.min.js").then(choiceInit),e.load("jquery","https://code.jquery.com/jquery-3.6.0.min.js").then(function(){e.load("jquery-ui","js/vendor/jquery-ui.min.js").then(catalogInit)})},1e3);const t=document.querySelector(".events-container");let o;function n(){window.innerWidth<=767&&"false"===t.dataset.initializedSwiper&&(o=new Swiper(t,{pagination:{el:".swiper-pagination-events.swiper-pagination",clickable:!0},slidesPerView:1,slidesPerGroup:1,slidesPerColumn:1,spaceBetween:60}),t.dataset.initializedSwiper="true"),window.innerWidth>767&&(t.dataset.initializedSwiper="false",t.classList.contains("swiper-container-initialized")&&o.destroy())}n(),window.addEventListener("resize",function(){n()}),document.querySelector(".events__button").addEventListener("click",function(e){e.currentTarget.style.display="none",document.querySelectorAll(".events__item").forEach(function(e){e.classList.add("events__item--active")})}),new Swiper(".publication__swiper-container",{preloadImages:!1,slidesPerView:1,slidesPerGroup:1,slidesPerColumn:1,spaceBetween:0,breakpoints:{1400:{slidesPerView:3,slidesPerGroup:3,spaceBetween:49},1024:{slidesPerView:2,slidesPerGroup:2,spaceBetween:33},768:{slidesPerView:2,slidesPerGroup:2,spaceBetween:-16},320:{slidesPerView:2,slidesPerGroup:2,slidesPerColumn:4,spaceBetween:0}},lazy:{loadOnTransitionStart:!1,loadPrevNext:!0},navigation:{prevEl:".publication__swiper-button-prev",nextEl:".publication__swiper-button-next"},pagination:{el:".swiper-pagination-publication.swiper-pagination",type:"fraction"},keyboard:{enable:!0,onlyInViewport:!0,pageUpDown:!1},watchSlidesProgress:!0,watchSlidesVisibility:!0,watchOverflow:!0,slidesPerColumnFill:"row",a11y:{nextSlideMessage:"Следующая страница слайда",prevSlideMessage:"Предыдущая страница слайда"}}),document.querySelector(".publication__caption-checkbox").addEventListener("click",function(e){const t=document.querySelector(".publication__checkbox-list");t.classList.contains("publication__checkbox-list--show")?t.classList.remove("publication__checkbox-list--show"):document.querySelector(".publication__checkbox-list").classList.add("publication__checkbox-list--show"),e.currentTarget.classList.toggle("publication__caption-checkbox--active")}),document.querySelectorAll(".publication__checkbox").forEach(function(e){const t=e.closest(".publication__checkbox-item");e.checked&&t.classList.add("publication__checkbox-item--active")}),document.querySelectorAll(".publication__checkbox").forEach(function(e){e.addEventListener("click",function(e){e.currentTarget.closest(".publication__checkbox-item").classList.toggle("publication__checkbox-item--active")})}),setTimeout(function(){e.load("popper.js","https://unpkg.com/@popperjs/core@2").then(function(){e.load("tippy.js","https://unpkg.com/tippy.js@6").then(tooltipInit)})},2e3),new Swiper(".project__swiper-container",{preloadImages:!1,slidesPerView:1,slidesPerGroup:1,slidesPerColumn:1,spaceBetween:0,breakpoints:{1400:{slidesPerView:3.001,slidesPerGroup:1,spaceBetween:49},1024:{slidesPerView:2.001,slidesPerGroup:2,spaceBetween:42},768:{slidesPerView:2.001,slidesPerGroup:2,spaceBetween:34},320:{slidesPerView:1.001,slidesPerGroup:1,slidesPerColumn:1,spaceBetween:5}},navigation:{prevEl:".project__swiper-button-prev",nextEl:".project__swiper-button-next"},keyboard:{enable:!0,onlyInViewport:!0,pageUpDown:!1},watchSlidesProgress:!0,watchSlidesVisibility:!0,watchOverflow:!0,slidesPerColumnFill:"row",a11y:{nextSlideMessage:"Следующая страница слайда",prevSlideMessage:"Предыдущая страница слайда"}}),setTimeout(function(){e.load("ymaps","https://api-maps.yandex.ru/2.1/?apikey=yourApikey&lang=ru_RU").then(ymapsInit),e.load("just-validate","js/vendor/just-validate.min.js").then(formInit)},2e3)});
